  LAST(1)  

LAST(1)

FreeBSD General Commands Manual

LAST(1)

[名称](#__u540D___u79F0_)
=======================

`last` —

表示用户和 tty 的最后一次登录

[概要](#__u6982___u8981_)
=======================

`last` \[`--libxo`\] \[`-swy`\] \[`-d` \[\[CC\]YY\]\[MMDD\]hhmm\[.SS\]\] \[`-f` file\] \[`-h` host\] \[`-n` maxrec\] \[`-t` tty\] \[user ...\]

[描述](#__u63CF___u8FF0_)
=======================

`last` 实用程序将按相反的时间顺序列出指定 users, ttys 和 hosts 的会话，或者列出在指定日期和时间登录的用户。 每行输出都包含用户名、执行会话的 tty、任何主机名、会话的开始和停止时间以及会话的持续时间。 如果会话仍在继续或因崩溃或关闭而中断， `last` 将如此指示。

可以使用以下选项：

[`--libxo`](#-libxo)

通过 libxo(3) 以不同的人类和机器可读格式生成输出。 有关命令行参数的详细信息，请参阅 xo\_parse\_args(3) 。

[`-d`](#d) date

指定快照日期和时间。 将报告在快照日期和时间登录的所有用户。 这可以与 `-f` 选项一起使用，以从存储的 utx.log 文件中获取结果。 提供此参数时，将忽略除 `-f` 和 `-n` 之外的所有其他选项。 参数应采用 \[\[CC\]YY\]\[MMDD\]hhmm\[.SS\] 形式，其中每对字母代表以下内容：

CC

年份的前两位数字（世纪）。

YY

年份的后两位数。 如果指定了 YY ，但未指定 CC ，则 69 到 99 之间的 YY 值将导致 CC 值为 19。 否则，使用 20 的 CC 值。

MM

一年中的月份，从 1 到 12。

DD

一个月中的第几天，从 1 到 31。

hh

一天中的小时，从 0 到 23。

mm

小时的分钟，从 0 到 59。

SS

分钟的秒数，从 0 到 60。

如果未指定 CC 和 YY 字母对，则默认值为当前年份。 如果未指定 SS 字母对，则该值默认为 0。

[`-f`](#f) file

读取文件 file 而不是默认文件 /var/log/utx.log 。

[`-h`](#h) host

Host 主机名可以是名称或互联网号码。

[`-n`](#n) maxrec

将报告限制为 maxrec 行。

[`-s`](#s)

以秒为单位报告登录会话的持续时间，而不是默认的天数、小时数和分钟数。

[`-t`](#t) tty

指定 tty 。 Tty 名称可以是全称或缩写，例如， “`last -t 03`” 等价于 “`last -t tty03`” 。

[`-w`](#w)

扩大持续时间字段以显示秒，以及默认的天、小时和分钟。

[`-y`](#y)

在会话开始时间报告年份。

如果给出了多个参数，并且未指定快照时间，则打印适用于任何参数的信息，例如， “`last root -t console`” 将列出所有 “`root`” 会话以及所有会话控制台终端。 如果没有指定用户、主机名或终端， `last` 打印所有登录和注销的记录。

伪用户 reboot 在系统重新启动时登录，因此 “`last reboot`” 将指示重新启动之间的平均时间。

如果 `last` 被中断，则表明搜索已进行到哪一天。 如果 `last` 被退出信号中断，则表明搜索已经进行了多远，然后继续。

[文件](#__u6587___u4EF6_)
=======================

/var/log/utx.log

登录数据库

[实例](#__u5B9E___u4F8B_)
=======================

在 pts/14 中显示登录，持续时间以秒为单位，并将报告限制为两行：

$ last -n2 -s -t pts/14 bob pts/1 Wed Dec 9 11:08 still logged in bob pts/2 Mon Dec 7 20:10 - 20:23 ( 776) 

在当年的 ‘`December 7th 20:23`’ 显示活动登录：

$ last -d 12072023 bob pts/1 Mon Dec 7 20:10 - 20:23 (00:12) bob pts/6 Mon Dec 7 19:24 - 22:27 (03:03) alice ttyv0 Mon Dec 7 19:18 - 22:27 (03:09) 

[参见](#__u53C2___u89C1_)
=======================

lastcomm(1), getutxent(3), libxo(3), xo\_parse\_args(3), ac(8), lastlogin(8)

[历史](#__u5386___u53F2_)
=======================

`last` 实用程序首次出现在 1BSD 中。

[作者](#__u4F5C___u8005_)
=======================

原始版本由 Howard P. Katseff 编写； Keith Bostic 在 1986/87 年重写了它，以增加功能并提高代码质量。 Philip Paeps 在 2018 年 8 月添加了 libxo(3) 支持。

[缺陷](#__u7F3A___u9677_)
=======================

如果登录 shell 由于某种原因异常终止，则很可能不会将注销记录写入 utx.log 文件。 在这种情况下， `last` 将注销时间指示为 "shutdown"。

January 9, 2021

FreeBSD 13.1-RELEASE