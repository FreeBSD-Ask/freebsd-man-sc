  DU(1)  

DU(1)

FreeBSD General Commands Manual

DU(1)

[名称](#__u540D___u79F0_)
=======================

`du` —

显示磁盘使用统计信息

[概要](#__u6982___u8981_)
=======================

`du` \[`-Aclnx`\] \[`-H` | `-L` | `-P`\] \[`-g` | `-h` | `-k` | `-m`\] \[`-a` | `-s` | `-d` depth\] \[`-B` blocksize\] \[`-I` mask\] \[`-t` threshold\] \[file ...\]

[描述](#__u63CF___u8FF0_)
=======================

`du` 实用程序显示每个文件参数以及以每个目录参数为根的文件层次结构中的每个目录的文件系统块使用情况。 如果未指定文件，则显示以当前目录为根的层次结构的块使用情况。

选项如下：

[`-A`](#A)

显示表观大小而不是磁盘使用情况。 这在对压缩卷或稀疏文件进行操作时会很有帮助。

[`-B`](#B) blocksize

计算 blocksize byte blocks. 字节块中的块计数。 这与 `-h`, `-k`, `-m`, `-``-si` 和 `-g` 选项或设置 `BLOCKSIZE` 不同，它可以估计在给定 blocksize 的文件系统上检查的文件层次结构需要多少空间。 除非在 `-A` 模式下， blocksize 会向上舍入到 512 的下一个倍数。

[`-H`](#H)

遵循命令行上的符号链接，不遵循文件层次结构中的符号链接。

[`-I`](#I) mask

忽略与指定 mask 匹配的文件和目录。

[`-L`](#L)

遵循命令行和文件层次结构中的符号链接。

[`-P`](#P)

不遵循符号链接。这是默认设置。

[`-a`](#a)

为文件层次结构中的每个文件显示一个条目。

[`-c`](#c)

显示总计。

[`-d`](#d) depth

显示所有文件和目录 depth 目录的条目。

[`-g`](#g)

以 1073741824 字节 (1 GiB) 块显示块计数。

[`-h`](#h)

“Human-readable” 输出。 使用单位后缀: Byte, Kilobyte, Megabyte, Gigabyte, Terabyte 和 Petabyte ，基于 1024 的幂。

[`-k`](#k)

以 1024 字节 (1 kiB) 块显示块计数。

[`-l`](#l)

如果一个文件有多个硬链接，请多次计算其大小。 `du` 的默认行为是只计算具有多个硬链接的文件一次。 当指定 `-l` 选项时，硬链接检查被禁用，并且这些文件被计算（和显示）的次数与找到的次数一样多。

[`-m`](#m)

以 1048576 字节 (1 MiB) 块显示块计数。

[`-n`](#n)

忽略设置了用户 “nodump” 标志 (`UF_NODUMP`) 的文件和目录。

[`-r`](#r)

生成有关无法读取的目录、无法打开的文件等的消息。 这是默认情况。此选项的存在仅是为了符合 X/Open Portability Guide 第 4 版 X/Open Portability Guide Issue 4 (“XPG4”) 。

[`-s`](#s)

显示每个指定文件的条目。 （相当于 `-d` `0`)

`-``-si`

“Human-readable” 输出。 使用单位后缀：Byte、Kilobyte、Megabyte、Gigabyte、Terabyte 和 Petabyte，基于 1000 的幂。

[`-t`](#t) threshold

仅显示大小超过 threshold 的条目。 如果 threshold 为负，则仅显示大小小于 threshold 绝对值的条目。

[`-x`](#x)

不遍历文件系统挂载点。

`du` 实用程序计算符号链接使用的存储空间，而不是它们引用的文件，除非指定了 `-H` 或 `-L` 选项。 如果指定了 `-H` 或 `-L` 选项，则不计算（或显示）后面的任何符号链接使用的存储空间。 `-H`, `-L` 和 `-P` 选项相互覆盖，命令的操作由指定的最后一个选项决定。

`-h`, `-k`, `-m` 和 `-``-si` 选项都相互覆盖；指定的最后一个确定使用的块计数。

[环境](#__u73AF___u5883_)
=======================

[`BLOCKSIZE`](#BLOCKSIZE)

如果设置了环境变量 `BLOCKSIZE` ，并且未指定 `-h`, `-k`, `-m` 或 `-``-si` 选项，则块计数将以该块大小为单位显示。 如果未设置 `BLOCKSIZE` ，并且未指定 `-h`, `-k`, `-m` 或 `-``-si` 选项，则块计数将以 512 字节块的形式显示。

[实例](#__u5B9E___u4F8B_)
=======================

显示当前目录中所有文件的磁盘使用情况。 输出是人类可读的形式：

`# du -ah`

总结当前目录的磁盘使用情况：

`# du -hs`

总结特定目录的磁盘使用情况：

`# du -hs /home`

显示特定目录中所有 C 文件的名称和大小。 最后还要显示总计：

`# du -ch /usr/src/sys/kern/*.c`

[参见](#__u53C2___u89C1_)
=======================

df(1), chflags(2), fts(3), symlink(7), quot(8)

[标准](#__u6807___u51C6_)
=======================

`du` 实用程序符合 IEEE Std 1003.1-2008 (“POSIX.1”) 规范。

标志 \[`-cdhP`\] 以及 `BLOCKSIZE` 环境变量是对该规范的扩展。

标志 \[`-r`\] 被接受但被忽略，以便与实施过时的 X/Open 命令和实用程序第 5 版 X/Open Commands and Utilities Issue 5 (“XCU5”) 标准的系统兼容。

[历史](#__u5386___u53F2_)
=======================

`du` 实用程序及其 `-a` 和 `-s` 选项首次出现在 Version 1 AT&T UNIX 中。

`-r` 选项首先出现在 AT&T System III UNIX 中，并且从 FreeBSD 3.5 开始可用。 `-k` 和 `-x` 选项首先出现在 4.3BSD-Reno 中，而 `-H` 出现在 4.4BSD 中。 `-c` 和 `-L` 选项首先出现在 GNU fileutils 中； `-L` 和 `-P` 从 4.4BSD-Lite1 开始可用， `-c` 从 FreeBSD 2.2.6 开始可用。 `-d` 选项最早出现在 FreeBSD 2.2 中， `-h` 选项最早出现在 FreeBSD 4.0 中。

[作者](#__u4F5C___u8005_)
=======================

这个版本的 `du` 由 Chris Newcomb 于 1989 年为 4.3BSD-Reno 编写。

August 1, 2019

FreeBSD 13.1-RELEASE