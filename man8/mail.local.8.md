  MAIL.LOCAL(8)  

MAIL.LOCAL(8)

FreeBSD System Manager's Manual

MAIL.LOCAL(8)

[名称](#__u540D___u79F0_)
=======================

mail.local - 将邮件存储在邮箱中

[概要](#__u6982___u8981_)
=======================

**mail.local** \[**\-7**\] \[**\-B**\] \[**\-b**\] \[**\-d**\] \[**\-D** _mbdb_\] \[**\-l**\] \[**\-s**\] \[**\-f** _from_|**\-r** _from_\] \[**\-h** _filename_ \] _user ..._

[描述](#__u63CF___u8FF0_)
=======================

**Mail.local** 读取标准输入直到文件结尾，并将其附加到每个 _user_ 的 **mail** 文件中。 _user_ 必须是有效的用户名。

选项如下：

**\-7**

不要在 LMTP 模式下宣传 8BITMIME 支持。

**\-B**

关闭通知“biff”服务的尝试。

**\-b**

如果邮箱超出配额，则返回永久错误而不是临时错误。

**\-d**

指定这是一个交付（为了向后兼容）。 此选项无效。

**\-D** _mbdb_

指定用于查找本地收件人姓名的邮箱数据库的名称。 此选项默认为“pw”，即使用 getpwnam()。

**\-f** _from_

指定发件人的姓名。

**\-l**

开启 LMTP 模式。

**\-s**

关闭 fsync(2) 调用，该调用会在返回 "success" 状态之前强制将邮箱提交到磁盘。

**\-r** _from_

指定发件人的姓名（为了向后兼容）。与 -f 相同。

**\-h** _filename_

将传入的邮件以 _filename_ 存储在用户的主目录中，而不是系统邮件假脱机目录中。

仅当使用 -DHASHSPOOL 编译了 **mail.local** 时，下一个选项才可用。

**\-H** _hashtypehashdepth_

选择散列的邮件目录。 有效的哈希类型是用户名的 **u** 和 MD5 的 **m** （需要使用 -DHASHSPOOLMD5 编译）。 示例： **\-H** _u2_ 选择散列深度为 2 的用户名散列。 注意：哈希类型和深度之间不能有空格。

**\-p** _path_

指定备用邮件假脱机路径。

**\-n**

指定不剥离 LMTP 模式下收件人地址的域部分。

邮箱中的单个邮件消息由一个空行分隔，然后是一个以字符串“From”开头的行。 包含字符串“发件人”、发件人姓名和时间戳的行被添加到每个已发送的邮件消息之前。 每条消息都附加一个空行。 大于字符 (\`\`>'') 被添加到消息中任何可能被误认为是 \`\`From '' 分隔符行的行（即以五个字符 \`\`From '' 开始的行一个空行）。

邮件文件在附加邮件时被 flock(2) 独占锁定，并且在邮箱被锁定时还会创建一个 **user.lock** 文件以与旧的MUA 兼容。

如果 getservbyname(3) 返回 \`\`biff'' 服务，则通知 biff 服务器已发送邮件。

The **mail.local** 实用程序在成功时退出 0，如果发生错误则 >0。

[环境](#__u73AF___u5883_)
=======================

TZ

用于在时间戳上设置适当的时区。

[文件](#__u6587___u4EF6_)
=======================

/tmp/local.XXXXXX

临时文件

/var/mail/user

用户的默认邮箱目录

/var/mail/user.lock

锁定用户默认邮箱的文件

[参见](#__u53C2___u89C1_)
=======================

mail(1), flock(2), getservbyname(3), comsat(8), sendmail(8)

[警告](#__u8B66___u544A_)
=======================

**mail.local** 仅转义空行后面的 "^From " 行。 如果应转义所有以 "From " 开头的行，请在 sendmail.cf 文件中为本地邮件程序使用“E”标志。

[历史](#__u5386___u53F2_)
=======================

**mail.local** 的超集（处理邮箱阅读和邮件传递）作为程序 **mail** 出现在版本 7 AT&T UNIX 中。

$Date: 2013-11-22 20:51:51 $